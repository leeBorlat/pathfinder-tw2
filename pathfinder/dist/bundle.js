(()=>{"use strict";function t(t,n,e){if(!(e<0||e>100)){for(var r=Array.from({length:n},(function(e,r){return Array.from({length:t},(function(e,o){return 0===o||o===t-1||0===r||r===n-1?"#":" "}))})),o=t-2,l=n-2,u=o*l,a=Math.floor(u*(e/100));a>0;){var i=Math.floor(Math.random()*o)+1,c=Math.floor(Math.random()*l)+1;" "===r[c][i]&&(r[c][i]="#",a--)}return r.map((function(t){return t.join("")})).join("\n")}console.error("Percent must be from 0 to 100")}var n=t(121,61,0);console.log(n);var e=n.split("\n").map((function(t,n){return t.split("").map((function(t,e){return{x:e,y:n,wall:"#"===t}}))})),r=15.5,o=document.getElementById("canvas");o.width=e[0].length*r,o.height=e.length*r;var l,u=o.getContext("2d"),a=function(t,n){u.fillStyle=n,t.forEach((function(t){u.fillRect(t.x*r+1,t.y*r+1,13.5,13.5)}))},i=function(){return i=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},i.apply(this,arguments)},c=function(t,n,e,r){return new(e||(e=Promise))((function(o,l){function u(t){try{i(r.next(t))}catch(t){l(t)}}function a(t){try{i(r.throw(t))}catch(t){l(t)}}function i(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,a)}i((r=r.apply(t,n||[])).next())}))},f=function(t,n){var e,r,o,l,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(i){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(u=0)),u;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=n.call(t,u)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},s=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,l=n.length;o<l;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},h={x:1,y:1,wall:!1},d={x:119,y:59,wall:!1},y=null,p=null;function v(n){var r=t(121,61,n).split("\n").map((function(t,n){return t.split("").map((function(t,e){return{x:e,y:n,wall:"#"===t}}))})),o=document.getElementById("canvas"),l=o.getContext("2d");null==l||l.clearRect(0,0,o.width,o.height);var u=r.flat().filter((function(t){return t.wall})),i=r.flat().filter((function(t){return!t.wall}));a(u,"#000"),a(i,"#fff"),a([h],"green"),a([d],"red"),e.splice.apply(e,s([0,e.length],r,!1))}document.addEventListener("DOMContentLoaded",(function(){v(0)})),null===(l=document.getElementById("generateMazeBtn"))||void 0===l||l.addEventListener("click",(function(){var t=document.getElementById("randomizer-percentage");v(t.value?parseInt(t.value):30)})),document.querySelectorAll(".startx, .starty, .goalx, .goaly").forEach((function(t){t.addEventListener("keypress",(function(t){var n,r,o,l;"Enter"===t.key&&(n=parseInt(document.querySelector(".startx").value),r=parseInt(document.querySelector(".starty").value),o=parseInt(document.querySelector(".goalx").value),l=parseInt(document.querySelector(".goaly").value),!(n>=1&&n<=119&&r>=1&&r<=59&&o>=1&&o<=119&&l>=1&&l<=59)||n===o&&r===l||e[r][n].wall||e[l][o].wall?alert("Invalid input. x should be between 1 and 120, y should be between 1 and 60, start and goal nodes should not be the same, and should not be on a wall."):(y=h,p=d,d={x:o,y:l,wall:!1},e[(h={x:n,y:r,wall:!1}).y][h.x]=h,e[d.y][d.x]=d,y&&a([y],"#fff"),p&&a([p],"#fff"),a([h],"green"),a([d],"red"),console.log(h),console.log(d)))}))}));var g=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},m=function(t,n){var r=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0},{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}].map((function(n){return r=t.x+n.x,o=t.y+n.y,r<0||r>=e[0].length||o<0||o>=e.length?null:i({},e[o][r]);var r,o})).filter((function(t){return null!==t})).filter((function(t){return!t.wall}));return r.map((function(e){return i(i({},e),{previous:t,totalCost:(t.totalCost||0)+1,heuristic:(r=e,o=n,Math.abs(r.x-o.x)+Math.abs(r.y-o.y))});var r,o}))},w=function(t,n){return t.x===n.x&&t.y===n.y},x=function(t,n){return t.totalCost+t.heuristic<n.totalCost+n.heuristic||t.totalCost+t.heuristic===n.totalCost+n.heuristic&&t.heuristic<n.heuristic},b=function(t){return t.previous?s([i({},t)],b(t.previous),!0):[i({},t)]},E=function(t,n){return w(t,n)&&!x(t,n)};function I(){var t=document.getElementById("canvas"),n=t.getContext("2d");null==n||n.clearRect(0,0,t.width,t.height);var r=e.flat().filter((function(t){return t.wall})),o=e.flat().filter((function(t){return!t.wall}));a(r,"#000"),a(o,"#fff"),a([h],"green"),a([d],"red"),a(e.flat().filter((function(t){return!t.wall&&!w(h,{x:1,y:1,wall:!1})&&!w(d,{x:119,y:59,wall:!1})})),"#fff")}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("find-path").addEventListener("click",(function(){var t=document.querySelector(".drpdwnAlgo").value;"optimalPath"===t?function(t,n){return c(void 0,void 0,void 0,(function(){var e,r,o,l,u;return f(this,(function(c){switch(c.label){case 0:e=[t],r=[],c.label=1;case 1:return o=e.shift(),w(o,n)?(l=b(o),(u=document.getElementById("path-length"))instanceof HTMLInputElement&&(u.value=l.length.toString()),a(l.filter((function(e){return!w(e,t)&&!w(e,n)})),"yellow"),[2,"Found path with length ".concat(l.length)]):(r.push(i({},o)),m(o,n).forEach((function(t){if(!s(s([],r,!0),e,!0).some((function(n){return E(t,n)}))){for(var n=0;n<e.length;n++)if(x(t,e[n]))return void e.splice(n,0,t);e.push(t)}})),a(r.filter((function(e){return!w(e,t)&&!w(e,n)})),"#00f"),a(e.filter((function(e){return!w(e,t)&&!w(e,n)})),"pink"),[4,new Promise((function(t){return setTimeout(t,0)}))]);case 2:c.sent(),c.label=3;case 3:if(e.length>0&&e.length<1e6)return[3,1];c.label=4;case 4:return[2,"Path not found"]}}))}))}(h,d).then((function(t){var n=document.getElementById("output");n&&(n.innerText=t)})):"tradGBFS"===t?function(t,n){return c(void 0,void 0,void 0,(function(){var e,r,o,l,u;return f(this,(function(c){switch(c.label){case 0:e=[t],r=[],c.label=1;case 1:return e.length>0?(e.sort((function(t,e){return g(t,n)-g(e,n)})),o=e.shift(),w(o,n)?(l=b(o),(u=document.getElementById("path-length"))instanceof HTMLInputElement&&(u.value=l.length.toString()),a(l.filter((function(e){return!w(e,t)&&!w(e,n)})),"yellow"),[2,"Found path with length ".concat(l.length)]):(r.push(i({},o)),m(o,n).forEach((function(t){s(s([],r,!0),e,!0).some((function(n){return E(t,n)}))||e.push(t)})),a(r.filter((function(e){return!w(e,t)&&!w(e,n)})),"#00f"),a(e.filter((function(e){return!w(e,t)&&!w(e,n)})),"pink"),[4,new Promise((function(t){return setTimeout(t,0)}))])):[3,3];case 2:return c.sent(),[3,1];case 3:return[2,"Path not found"]}}))}))}(h,d).then((function(t){var n=document.getElementById("output");n&&(n.innerText=t)})):alert("Please select an option to run the pathfinding algorithm.")})),document.getElementById("reset-path").addEventListener("click",(function(){I()})),document.getElementById("clear-button").addEventListener("click",(function(){I()}))}))})();